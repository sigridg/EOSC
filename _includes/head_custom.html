<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  window.addEventListener('load', function() {
    mermaid.initialize({ 
      startOnLoad: false,
      theme: 'default',
      securityLevel: 'loose',
      logLevel: 'debug'
    });
    
    // Manually find and render
    const elements = document.querySelectorAll('.mermaid');
    elements.forEach((element, index) => {
      const graphDefinition = element.textContent;
      const id = 'mermaid-' + index;
      
      mermaid.render(id, graphDefinition).then(({svg}) => {
        element.innerHTML = svg;
      }).catch((error) => {
        console.error('Mermaid error:', error);
        element.innerHTML = '<pre>Mermaid Error: ' + error.message + '</pre>';
      });
    });
  });
</script>